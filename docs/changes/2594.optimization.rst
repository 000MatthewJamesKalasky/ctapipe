Update exception handling in tools

- Add a possibility to register custom exceptions and handle them in ``Tool.run()``
  with the preservation of the exit code.
